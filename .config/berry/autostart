#!/bin/sh

# xfonts
xset fp+ /usr/local/share/fonts/scientifica &

# xrdb
xrdb ~/.Xresources &

# sxhkd
sxhkd -c $HOME/.config/berry/sxhkdrc $HOME/.config/sxhkd/sxhkdrc.common &

# redshift
redshift.sh &

# picom
picom --experimental-backends --config ~/.config/picom/picom.conf &

# touchegg
touchegg-berry.sh &

# polkit
# ubuntu
/usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 &
# arch
#/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

# xmenu
xclickroot -r xmenu.sh &

# xscreensaver
xscreensaver &

# lock
xautolock -time 5 -locker 'xscreensaver-command -lock' -corners 00-+ &

# wal
wal -R -o wal-berry.sh -o wal-dunst.sh &

# polybar
polybar -r -c ~/.config/polybar/config bottom &

# Set decoration geometry
berryc border_width         0
berryc inner_border_width   0
berryc title_height         24
berryc edge_gap             0 60 0 0
berryc decorate_new 	    "true"

# Set decoration colors
berryc focus_color          
berryc unfocus_color        
berryc inner_focus_color    565679
berryc inner_unfocus_color  3D3D56
berryc text_focus_color     000000
berryc text_unfocus_color   111111

# Other options
berryc smart_place "true"
berryc draw_text   "true"
berryc edge_lock   "true"
berryc set_font    "scientifica-8:bold"


# Relaunch berry if the binary changes, otherwise bail
csum=$(sha1sum $(which berry))
new_csum=""
while true
do
    if [ "$csum" != "$new_csum" ]
    then
        csum=$new_csum
        berry
    else
        exit 0
    fi
    new_csum=$(sha1sum $(which berry))
    sleep 0.5
done
